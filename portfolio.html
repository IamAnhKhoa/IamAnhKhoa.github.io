<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Tr·∫ßn Anh Khoa // Portfolio</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=VT323&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg1:#0a1f27; --bg2:#0f3a47;
      --neon:#00ffaa; --neon-soft:#00ffaa88; --neon-glow:#00ffff;
      --text:#d9fff5; --muted:#9deee0; --accent:#ff00ff;
    }
    *{box-sizing:border-box}
    html,body{height:100%; margin:0}
    body{
      overflow-x:hidden; color:var(--text);
      background: var(--bg1); /* Solid background for canvas behind */
      font-family: 'Space Mono', system-ui, sans-serif; letter-spacing:.2px;
      scroll-behavior:smooth;
    }
    
    /* NEW: Custom scrollbar for a consistent theme */
    body::-webkit-scrollbar { width: 8px; }
    body::-webkit-scrollbar-track { background: var(--bg2); }
    body::-webkit-scrollbar-thumb {
        background-color: var(--neon);
        border-radius: 10px;
        border: 2px solid var(--bg1);
    }

    /* UPDATED: Canvas is now a fixed background */
    canvas{ 
        display:block; width:100% !important; height:100% !important; 
        margin:0; padding:0; position:fixed; top:0; left:0; z-index:1;
    }

    /* UPDATED: Content is on top of the canvas */
    .content{
      position:relative; z-index:2;
      /* Add a subtle gradient to the content background */
      background: linear-gradient(135deg, rgba(10,31,39,0.9) 0%, rgba(15,58,71,0.8) 50%, rgba(10,31,39,0.9) 100%);
    }

    /* ====== Top Bar ====== */
    .topbar{
      position:fixed; z-index:10; inset:0 0 auto 0; display:flex;
      align-items:center; justify-content:space-between; padding:16px 24px;
      background: linear-gradient(to bottom, rgba(10,31,39,.8), transparent);
      backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(0,255,170,.2);
    }
    .logo{
      display:flex; align-items:center; gap:12px; color:var(--neon);
      text-shadow:0 0 15px var(--neon); user-select:none; font-weight:700;
    }
    .logo .mark{
      width:44px; height:44px; border:2px solid var(--neon); border-radius:12px;
      display:grid; place-items:center; font-family:"VT323", monospace; font-size:24px;
      box-shadow:0 0 15px var(--neon-soft), inset 0 0 10px rgba(0,255,255,.15);
      background: linear-gradient(135deg, rgba(0,255,170,.1), rgba(0,255,255,.05));
    }
    nav.menu{ display:flex; gap:8px; flex-wrap:wrap }
    nav.menu a{
      text-decoration:none; color:var(--neon); padding:.5rem 1rem; border:1px solid var(--neon);
      border-radius:8px; transition: .3s all; font-size:13px; font-weight:600;
      background: linear-gradient(135deg, rgba(0,255,170,.05), rgba(0,255,200,.02));
    }
    nav.menu a:hover{  
      box-shadow:0 0 20px var(--neon), inset 0 0 10px rgba(0,255,255,.2);
      transform: translateY(-2px);
    }
    nav.menu a.active{  
      box-shadow:0 0 25px var(--neon), inset 0 0 15px rgba(0,255,255,.3);
      border-color:var(--neon-glow);
    }
    
    /* ====== Content Sections ====== */
    header.hero{
      position:relative; min-height:100vh; display:grid; place-items:center;
      text-align:center; padding:120px 20px 60px;
    }
    .hero-content{ position:relative; }
    .glitch{
      font-size: clamp(36px, 8vw, 72px); color:var(--neon); font-weight:700;
      font-family: Orbitron, sans-serif; letter-spacing:2px;
      text-shadow: 0 0 20px var(--neon), 0 0 40px rgba(0,255,170,.4);
      animation: glitch-anim 4s ease-in-out infinite;
    }
    @keyframes glitch-anim {
      0%{text-shadow: 0 0 20px var(--neon), 0 0 40px rgba(0,255,170,.4)}
      50%{text-shadow: 0 0 30px var(--neon-glow), 0 0 60px rgba(0,255,255,.5)}
      100%{text-shadow: 0 0 20px var(--neon), 0 0 40px rgba(0,255,170,.4)}
    }
    .subtitle{
      margin-top:16px; font-size:clamp(15px, 2vw, 18px); color:var(--muted);
      max-width:900px; margin-inline:auto; line-height:1.8;
      animation: fadeInUp .8s ease .3s backwards;
    }
    @keyframes fadeInUp { from{opacity:0; transform:translateY(20px)} to{opacity:1; transform:translateY(0)} }
    .cta{
      margin-top:28px; display:flex; gap:14px; justify-content:center; flex-wrap:wrap;
      animation: fadeInUp .8s ease .5s backwards;
    }
    .btn{
      cursor:pointer; background:transparent; color:var(--neon);
      border:2px solid var(--neon); border-radius:10px; padding:.7rem 1.4rem;
      font-weight:600; font-size:14px; position:relative; overflow:hidden;
      transition:.3s all; font-family:inherit;
      box-shadow:0 0 15px rgba(0,255,170,.3);
    }
    .btn::before{
      content:""; position:absolute; inset:0; background:var(--neon);
      transform:scaleX(0); transform-origin:left; transition:.4s;
      z-index:-1;
    }
    .btn:hover::before{ transform:scaleX(1) }
    .btn:hover{
      color:var(--bg1); box-shadow:0 0 30px var(--neon);
      transform: translateY(-3px) scale(1.05);
    }
    section{
      position:relative; padding:100px 20px; max-width:1200px; margin:0 auto;
    }
    .section-title{
      color:var(--neon); font-size:clamp(24px, 4vw, 36px); margin-bottom:20px;
      font-family: Orbitron, sans-serif; text-shadow:0 0 15px var(--neon);
    }
    .card{
      border:1px solid rgba(0,255,170,.3); border-radius:14px; padding:24px;
      background: linear-gradient(135deg, rgba(10,31,39,.5), rgba(15,58,71,.3));
      box-shadow: 0 0 20px rgba(0,255,170,.15), inset 0 0 15px rgba(0,255,255,.05);
      backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px);
      transition: .4s all;
    }
    .card:hover{
      border-color:var(--neon);
      box-shadow: 0 0 30px rgba(0,255,170,.25);
      transform: translateY(-8px);
    }
    .card h3{ margin-top:0; color:var(--neon-glow); font-size:18px; font-weight:700; }
    .card p{ line-height:1.7; margin:.8rem 0 }
    .grid{ display:grid; gap:20px; }
    @media (min-width: 768px){  
      .grid.cols-2{ grid-template-columns:1fr 1fr }
      .grid.cols-3{ grid-template-columns:repeat(3,1fr) }
    }
    .hint{ font-family: 'VT323', monospace; color:#aef; opacity:.7; font-size:12px; }
    input, textarea{
      width:100% !important; padding:.8rem !important; border-radius:8px !important;
      border:1px solid var(--neon) !important; background:#041e23cc !important;
      color:var(--text) !important; font-family:inherit !important;
      font-size:14px !important;
    }
    footer{
      position:relative; padding:50px 20px 30px; text-align:center;
      border-top: 1px solid rgba(0,255,170,.1);
    }
    .reveal{ opacity:0; transform: translateY(30px); transition: .7s all; }
    .reveal.in{ opacity:1; transform: translateY(0) }
  </style>
</head>
<body>
  <canvas id="three-canvas"></canvas>

  <div class="content">
    <div class="topbar">
      <div class="logo">
        <div class="mark">KA</div>
        <div><strong>Tr·∫ßn Anh Khoa</strong></div>
      </div>
      <nav class="menu" aria-label="Main">
        <a href="#home" class="active">HOME</a> <a href="#about">ABOUT</a> <a href="#work">WORK</a> <a href="#contact">CONTACT</a>
      </nav>
    </div>

    <header id="home" class="hero">
      <div class="hero-content">
        <div class="glitch">Tr·∫ßn Anh Khoa</div>
        <p class="subtitle">
          T√¥i x√¢y d·ª±ng c√°c h·ªá th·ªëng <strong>t·ª± ƒë·ªông h√≥a y t·∫ø</strong>, <strong>gi√°m s√°t BHYT</strong>,
          v√† <strong>dashboard d·ªØ li·ªáu to√†n di·ªán</strong>. Hi·ªán c√¥ng t√°c t·∫°i
          <em>Trung t√¢m Y t·∫ø huy·ªán C·ªß Chi</em>.
        </p>
        <div class="cta">
          <a class="btn" href="#work">XEM D·ª∞ √ÅN</a> <a class="btn" href="#about">V·ªÄ T√îI</a>
        </div>
      </div>
    </header>

    <section id="about">
      <h2 class="section-title">/ ABOUT</h2>
      <div class="grid cols-2">
        <div class="card reveal">
          <h3>üéØ Tri·∫øt l√Ω</h3>
          <p>ƒê∆°n gi·∫£n h√≥a quy tr√¨nh ‚Äì t·ª± ƒë·ªông h√≥a b∆∞·ªõc l·∫∑p ‚Äì ƒëo l∆∞·ªùng minh b·∫°ch ‚Äì ph·∫£n h·ªìi nhanh.</p>
        </div>
        <div class="card reveal">
          <h3>‚ö° NƒÉng l·ª±c c·ªët l√µi</h3>
          <ul style="margin:10px 0; padding-left:20px; line-height:1.9">
            <li>Gi√°m s√°t & ki·ªÉm tra KCB BHYT</li>
            <li>Dashboard v·∫≠n h√†nh (GAS / WebApp)</li>
            <li>T·ª± ƒë·ªông h√≥a b√°o c√°o 21 tr·∫°m</li>
            <li>T√≠ch h·ª£p d·ªØ li·ªáu ƒëa ngu·ªìn</li>
          </ul>
        </div>
      </div>
    </section>

    <section id="work">
      <h2 class="section-title">/ WORK</h2>
      <div class="grid cols-3">
        <div class="card reveal">
          <h3>üè• Gi√°m s√°t BHYT</h3>
          <p>Ph√°t hi·ªán l·ªói XML, c·∫£nh b√°o xu·∫•t to√°n.</p>
          <p class="hint">‚Üí GAS, HTML/JS, Chart.js</p>
        </div>
        <div class="card reveal">
          <h3>üìä Dashboard NCT</h3>
          <p>T·ª± ƒë·ªông l·ªãch KSK, th·ªëng k√™ theo tr·∫°m.</p>
          <p class="hint">‚Üí GAS Web App, Sheets API</p>
        </div>
        <div class="card reveal">
          <h3>üìÑ File VƒÉn B·∫£n 2.0</h3>
          <p>Kho bi·ªÉu m·∫´u s·ªë h√≥a, k√Ω s·ªë, ph√¢n quy·ªÅn.</p>
          <p class="hint">‚Üí HTML/JS, Drive, e-Sign</p>
        </div>
      </div>
    </section>

    <section id="contact">
      <h2 class="section-title">/ CONTACT</h2>
      <div class="grid cols-2">
        <div class="card reveal">
          <h3>üí¨ K·∫øt n·ªëi</h3>
          <p>R·∫•t s·∫µn l√≤ng chia s·∫ª & c·ªông t√°c.</p>
          <button class="btn" id="mailtoBtn">G·ª¨I EMAIL ‚Üí</button>
        </div>
        <div class="card reveal">
          <h3>‚úâÔ∏è L·ªùi nh·∫Øn nhanh</h3>
          <form id="contactForm">
            <label>Ti√™u ƒë·ªÅ:</label>
            <input type="text" name="subject" placeholder="Xin ch√†o..." required/>
            <label style="margin-top:12px">N·ªôi dung:</label>
            <textarea name="body" rows="4" placeholder="T√¥i mu·ªën..." required></textarea>
            <button class="btn" type="submit" style="margin-top:14px; width:100%">G·ª¨I ‚Üí</button>
          </form>
        </div>
      </div>
    </section>

    <footer>
      <p>¬© <span id="year"></span> Tr·∫ßn Anh Khoa ‚Äî Digital borders are thin üåê</p>
    </footer>
  </div>

  <script type="importmap">
    {
      "imports": {
        "three": "https://unpkg.com/three@0.164.1/build/three.module.js",
        "three/addons/": "https://unpkg.com/three@0.164.1/examples/jsm/"
      }
    }
  </script>

  <script type="module">
    import * as THREE from 'three';
    import { EffectComposer } from 'three/addons/postprocessing/EffectComposer.js';
    import { RenderPass } from 'three/addons/postprocessing/RenderPass.js';
    import { UnrealBloomPass } from 'three/addons/postprocessing/UnrealBloomPass.js';

    // ===================== SETUP =====================
    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
    camera.position.z = 10;

    const renderer = new THREE.WebGLRenderer({ 
        canvas: document.getElementById('three-canvas'), 
        antialias: true 
    });
    renderer.setSize(window.innerWidth, window.innerHeight);
    renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));

    // ===================== POST-PROCESSING (BLOOM EFFECT) =====================
    const renderScene = new RenderPass(scene, camera);
    const bloomPass = new UnrealBloomPass(new THREE.Vector2(window.innerWidth, window.innerHeight), 1.5, 0.4, 0.85);
    bloomPass.threshold = 0;
    bloomPass.strength = 1.5; // Intensity of the glow
    bloomPass.radius = 0.8;

    const composer = new EffectComposer(renderer);
    composer.addPass(renderScene);
    composer.addPass(bloomPass);

    // ===================== OBJECTS =====================
    const group = new THREE.Group();
    scene.add(group);

    // NEW: Central Energy Core with custom Shader
    const core_geom = new THREE.IcosahedronGeometry(3, 30); // Sphere with many faces
    const core_mat = new THREE.ShaderMaterial({
        uniforms: {
            time: { value: 0 },
            color: { value: new THREE.Color('#00ffaa') }
        },
        vertexShader: `
            uniform float time;
            varying vec3 vNormal;
            void main() {
                vNormal = normal;
                vec3 pos = position;
                float noise = sin(pos.x * 2.0 + time * 0.5) * cos(pos.y * 1.5 + time * 0.6) * 0.15;
                pos += normal * noise;
                gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);
            }
        `,
        fragmentShader: `
            uniform vec3 color;
            varying vec3 vNormal;
            void main() {
                float intensity = pow(0.7 - dot(vNormal, vec3(0.0, 0.0, 1.0)), 2.0);
                gl_FragColor = vec4(color * intensity, 1.0);
            }
        `,
        blending: THREE.AdditiveBlending,
        transparent: true,
    });
    const core = new THREE.Mesh(core_geom, core_mat);
    group.add(core);

    // Outer wireframe shell
    const wire_mat = new THREE.MeshBasicMaterial({ color: 0x00ffff, wireframe: true, transparent: true, opacity: 0.3 });
    const wireframe = new THREE.Mesh(core_geom, wire_mat);
    wireframe.scale.setScalar(1.001);
    core.add(wireframe);

    // ===================== PARTICLES =====================
    const particlesGeo = new THREE.BufferGeometry();
    const particlePositions = new Float32Array(5000 * 3);
    for (let i = 0; i < particlePositions.length; i++) {
        particlePositions[i] = (Math.random() - 0.5) * 50;
    }
    particlesGeo.setAttribute('position', new THREE.BufferAttribute(particlePositions, 3));
    const particlesMat = new THREE.PointsMaterial({
        size: 0.05, color: 0x00ffaa, transparent: true, opacity: 0.7, sizeAttenuation: true,
    });
    const particles = new THREE.Points(particlesGeo, particlesMat);
    scene.add(particles);

    // ===================== ANIMATION LOOP =====================
    const clock = new THREE.Clock();
    let scrollY = 0;

    window.addEventListener('scroll', () => { scrollY = window.scrollY; });

    function animate() {
        requestAnimationFrame(animate);
        const elapsedTime = clock.getElapsedTime();

        // Update shader time for wave effect
        core_mat.uniforms.time.value = elapsedTime;

        // Animate objects
        group.rotation.y = elapsedTime * 0.1;
        group.rotation.x = elapsedTime * 0.05;
        particles.rotation.y = -elapsedTime * 0.02;

        // Animate based on scroll - move camera up/down
        camera.position.y = -scrollY * 0.01;
        
        composer.render();
    }
    animate();

    // ===================== HELPERS =====================
    window.addEventListener('resize', () => {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
        composer.setSize(window.innerWidth, window.innerHeight);
    });

    // ===================== UI SCRIPT (No changes needed) =====================
    const links = [...document.querySelectorAll('nav.menu a')];
    const sections = links.map(a => document.querySelector(a.getAttribute('href')));
    const io = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                links.forEach(a => a.classList.toggle('active', a.getAttribute('href') === '#' + entry.target.id));
            }
        });
    }, { rootMargin: '-40% 0px -50% 0px' });
    sections.forEach(sec => sec && io.observe(sec));
    const reveals = [...document.querySelectorAll('.reveal')];
    const io2 = new IntersectionObserver((es) => {
        es.forEach(e => { if (e.isIntersecting) e.target.classList.add('in'); });
    }, { threshold: 0.1 });
    reveals.forEach(el => io2.observe(el));
    document.getElementById('year').textContent = new Date().getFullYear();
    document.getElementById('mailtoBtn').addEventListener('click', () => {
        window.location.href = `mailto:trananhkhoa@example.com?subject=Hello`;
    });
    document.getElementById('contactForm').addEventListener('submit', (e) => {
        e.preventDefault();
        const form = e.target;
        window.location.href = `mailto:trananhkhoa@example.com?subject=${encodeURIComponent(form.subject.value)}&body=${encodeURIComponent(form.body.value)}`;
    });
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function(e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            target && target.scrollIntoView({ behavior: 'smooth' });
        });
    });
  </script>
</body>
</html>
